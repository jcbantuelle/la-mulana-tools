<br />
<h1>Create Game</h1>
<%= form_with url: '/multiworlds', method: :post do |form| %>
  <div id="player-count-container">
    <div class="row">
      <div class="col-3">
        <%= form.label :player_count %>
        <br />
        <%= form.number_field :player_count, min: 1, class: "form-control" %>
      </div>
    </div>
    <br />
    <div class="row">
      <div class="col-3">
        <button id="player-count-next" type="button" class="btn btn-primary">Next</button>
      </div>
    </div>
  </div>
  <div id="players-container" class="d-none row">
    <div id="players">
    </div>
    <div class="col-3">
      <%= form.submit "Create Game", class: "btn btn-primary" %>
    </div>
  </div>
<% end %>

<script type="text/javascript">
  $('#player-count-next').on('click', function(event) {
    const player_count = $('#player_count').val()
    if (_.isEmpty(player_count) || _.toInteger(player_count) < 2) {
      alert('You must have at least 2 players to continue')
    } else {
      let player_template = handlebars.compile(`<%= render 'player' %>`)
      let player_block = $('#players')
      player_block.append(player_template({name: 'Justin'}))
      $('#player-count-container').hide()
      $('#players-container').removeClass('d-none')
    }
  })
</script>
